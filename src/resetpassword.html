<html>
    <head>
<link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="./assets/bootstrap/css/bootstrap-grid.css">
<link rel="stylesheet" href="./assets/css/resetpassword.css">   
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" 
integrity="sha512-OdEXQYCOldjqUEsuMKsZRj93Ht23QRlhIb8E/X0sbwZhme8eUw6g8q7AdxGJKakcBbv7+/PX0Gc2btf7Ru8cZA==" crossorigin="anonymous" /> 
</head>
    <body>
        <div class="container ">
            <!-- <div class="page-header main">
              <img style="height: 30px;"src="../assets/image/logo.png" alt="" class="img-responsive">
            
            </div> -->


            <div class="card c1">
              <div class="container">
                <!-- <div class="card-header">
     <img src="../assets/image/login.png" class="image" alt=""> Login
                </div> -->
                <div class="card-body">
                  
                  <div class="img-header "> <img class="mx-auto d-block" style="height: 30px;"src="./assets/image/logo.png" alt="" class="img-responsive"></div>
                  <div class="info">Enter your username and we'll send you a link to get back into your account.</div>
                    <div class="mb-3">
                        <label for="Username" class="form-label"><b>Username</b></label>
                        <input type="email" class="form-control" id="username"  onkeyup="typingVerify()">
                      </div>
                
                </div>
        
                  <hr>
                </div>
                <a href="./login.html" class="forgot text-center">Back to Login</a>
                <button type="button" class="btn button-t" onclick="resetPasswordLink()" id="reset" disabled>Send Login Link</button>


                
                <!-- container ends -->
              </div>


              <div class="card c2">
                  <div class="container">

                    <div class="text-center register">Don't have an account? <a href="./register.html" class="anchor_register">Register</a></div>
                  </div>
                </div>
              

                    <div style="margin-top: 30px;" id="status">
                       
               
              
                  </div>



            </div>
        

  <!-- platform assets -->
  <script type="text/javascript" src="/ace-lib/runtime.js"></script>
  <script type="text/javascript" src="/ace-lib/es2015-polyfills.js" nomodule></script>
  <script type="text/javascript" src="/ace-lib/polyfills.js"></script>
  <script type="text/javascript" src="/ace-lib/scripts.js"></script>
  <script type="text/javascript" src="/ace-lib/vendor.js"></script>
  <script type="text/javascript" src="/ace-lib/main.js"></script>
<script>
 function typingVerify(){
        if(document.getElementById('username').value=== "") { 
            document.getElementById('reset').disabled = true; 
        } else { 
            document.getElementById('reset').disabled = false;
        }
    }

function resetPasswordLink(){
    let data=null; 
let username=document.getElementById('username').value;
var myHeaders = new Headers();
myHeaders.append("Content-Type", "application/json");
// myHeaders.append("Cookie", "JSESSIONID=291DDD5F00B4E2DF47E6B12266201F97; route=f914add77c951bd40d60baf1d4bc6d25");

var raw = JSON.stringify({
  "Username": username
});

var requestOptions = {
  method: 'POST',
  headers: myHeaders,
  body: raw,
  redirect: 'follow'
};


fetch("https://srikanthsag.int-aws-us.webmethods.io/runflow/run/sync/1onXoLb2Pm", requestOptions)
  .then(response =>response.text())
  .then(function(result){

       let data= JSON.parse(result);
       console.log(data.Status);


       document.querySelector("#status").innerHTML=` <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
                `+data.Status+
                    `<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>`
  })

  .catch(error => console.log('error', error));

// if(data!=null){  

//                 }
                
                
}

</script>

    </body>
</html>